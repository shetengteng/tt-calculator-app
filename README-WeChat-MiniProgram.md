# 微信小程序配置指南

## 📋 配置步骤

### 1. 申请微信小程序
1. 访问 [微信公众平台](https://mp.weixin.qq.com/)
2. 注册小程序账号
3. 获取小程序的 AppID

### 2. 配置 AppID
在 `manifest.json` 中填入你的小程序 AppID：

```json
"mp-weixin": {
    "appid": "你的小程序AppID",
    // 其他配置...
}
```

### 3. 安装开发工具
1. 下载并安装 [微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)
2. 使用微信扫码登录

### 4. 编译和预览
在HBuilderX中：
1. 选择 "发行" → "小程序-微信"
2. 填入小程序名称和AppID
3. 点击发行，生成小程序代码包

### 5. 在微信开发者工具中打开
1. 选择 "导入项目"
2. 选择编译生成的 `unpackage/dist/build/mp-weixin` 目录
3. 填入AppID
4. 点击"确定"

## 🔧 已完成的适配工作

### ✅ 平台兼容性
- **DOM操作适配**：使用条件编译分离H5和小程序环境的DOM操作
- **样式兼容性**：移除小程序不支持的 `:hover` 伪类
- **音频适配**：使用 `uni.createInnerAudioContext` 适配小程序音频播放
- **存储适配**：使用 `uni.getStorageSync/setStorageSync` 统一存储接口

### ✅ 配置优化
- **编译设置**：启用ES6、PostCSS、代码压缩
- **性能优化**：启用组件懒加载和分包优化
- **开发设置**：禁用URL检查，启用增强编译

### ✅ 功能兼容性
- **计算器核心功能**：完全兼容
- **主题系统**：适配小程序环境
- **音效系统**：使用小程序音频API
- **设置存储**：使用小程序存储API
- **国际化**：完全兼容

## 📱 功能特性

### 支持的功能
- ✅ 基础计算功能
- ✅ 科学计算
- ✅ 历史记录
- ✅ 主题切换
- ✅ 音效设置
- ✅ 触觉反馈
- ✅ 多语言支持
- ✅ 设置保存

### 小程序特有优化
- 🎯 使用小程序原生组件
- 🎯 适配小程序生命周期
- 🎯 优化小程序包体积
- 🎯 使用小程序音频API
- 🎯 适配小程序导航栏

## 🚀 发布上线

### 1. 版本管理
在 `manifest.json` 中更新版本信息：
```json
{
    "versionName": "1.0.0",
    "versionCode": "100"
}
```

### 2. 代码审核
1. 在微信开发者工具中点击"上传"
2. 填写版本号和项目备注
3. 上传代码包

### 3. 提交审核
1. 登录微信公众平台
2. 进入"版本管理"
3. 提交审核并填写相关信息
4. 等待审核结果

### 4. 发布上线
审核通过后，在微信公众平台点击"发布"即可上线。

## 📝 注意事项

### 域名配置
如果使用网络请求，需要在小程序后台配置服务器域名：
1. 登录微信公众平台
2. 进入"开发" → "开发设置"
3. 配置服务器域名

### 权限申请
如果使用特殊功能（如位置、摄像头等），需要申请相应权限。

### 包体积限制
- 小程序总包体积不能超过2MB
- 单个分包不能超过2MB
- 总包体积不能超过20MB

## 🛠️ 常见问题

### Q: 小程序中音效无法播放？
A: 检查音频文件路径是否正确，确保使用的是 `uni.createInnerAudioContext` API。

### Q: 主题切换不生效？
A: 小程序环境下主题切换使用页面样式设置，已在代码中适配。

### Q: 编译报错？
A: 检查是否移除了所有不兼容的API调用，确保使用uni-app统一API。

## 📞 技术支持

如果遇到问题，可以：
1. 查看uni-app官方文档
2. 查看微信小程序开发文档
3. 在项目Issues中提问

---

**计算器小程序已针对微信小程序环境进行了全面适配，可以直接编译发布！** 🎉 